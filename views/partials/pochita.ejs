<% 
const quotes = [
  'This is a contract. I’ll be your heart. In exchange… Show me your dreams.',
  'Everyone’s got their own dreams. There’s nothing wrong with that. But if you are gonna get in our way, then fvck off.',
  'If there’s a devil that’ll be my friend, then I will take it ’cause I never had any.',
  'I’ve decided if I sleep tonight, I’m gonna dream about eating bread with jam smothered all over it with you, Pochita.',
  'All devils are born bearing a name. As that name becomes feared, the devil itself increases in power.'
];
const randoq = quotes[Math.floor(Math.random() * quotes.length)];
%>

<section id="pochita">
  <div class="container-fluid text-center">
  <h6 class="text-center pt-2" id="sect-title"">Pochita's Picks</h6>

    <div class="container text-center mt-5">
      <div class="row row-cols-2 justify-content-around">

      <div class="col mt-4" id="gregg"> 
         <button id="popovitch" class="btn bg-transparent border-0 float-start smaller" data-bs-container="body" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="left" data-bs-content="<%= randoq %>">
          <img src="pochita_img.png" class="rounded float-start mt-4" id="plcdd"> 
         </button> 
      </div> 

        <div class="col" style="margin-left: -150px;">
           <ul class="image-list-small">
    <li> 
      <a style="background-image: url('');"></a>
    </li>
    <li>
      <a style="background-image: url('');"></a>
    </li>
    <li>
      <a style="background-image: url('');"></a>
    </li>
    <li>
      <a style="background-image: url('');"></a>
    </li>
    <li>
      <a style="background-image: url('');"></a> 
    </li>
    <li>
      <a style="background-image: url('');"></a> 
    </li>
  <li>
      <a style="background-image: url('');"></a> 
    </li>
    <li>
      <a style="background-image: url('');"></a>  
    </li>
    <li>
      <a style="background-image: url('');"></a> 
    </li>
   </ul>
        </div>

      </div>
    </div> 

  </div>
</section>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script>
const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl));

document.getElementById("gregg").addEventListener("mouseleave", function() { 
 $('#popovitch').popover('dispose');
 $('#popovitch').popover({ placement : 'left', trigger: 'hover', content : '“Stop that! I am not a corn dog!”' }); 
});

  (function updatePochitaImagesWhenReady() {
    const imageURLs = [
      "https://static.zerochan.net/Chainsaw.Man.1024.4423821.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4489072.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4423784.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4460443.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4023823.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4220462.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4021687.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4021663.webp",
      "https://static.zerochan.net/Denji.1024.3971470.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3901836.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.4024065.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3981323.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3848427.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3819183.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3860607.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3811844.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3802316.webp",
      "https://static.zerochan.net/Chainsaw.Man.1024.3807287.webp"
    ];
  
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
  
    function updateImages() {
      const section = document.querySelector("#pochita");
      if (!section) return false;
  
      const aTags = section.querySelectorAll(".image-list-small li a");
      if (aTags.length === 0) return false;
  
      const shuffled = shuffle([...imageURLs]).slice(0, aTags.length);
  
      aTags.forEach((aTag, i) => {
        aTag.style.setProperty("background-image", `url('${shuffled[i]}')`, "important");
        aTag.style.setProperty("background-size", "100% 100%", "important");
      });
  
      return true;
    }
  
    if (!updateImages()) {
      const observer = new MutationObserver(() => {
        if (updateImages()) observer.disconnect();
      });
  
      observer.observe(document.body, { childList: true, subtree: true });
    }
  })();
  </script>